{{template "header" .}}
<div class="page-header">
	<h1>Payroll</h1>
	<div style="display: flex; gap: 0.5rem;">
		<a href="/payroll/weeks/new" class="btn btn-primary">New Week</a>
		<a href="/employees" class="btn btn-secondary">Employees</a>
	</div>
</div>

{{if .Weeks}}
<table>
	<thead>
		<tr>
			<th class="hide-mobile">#</th>
			<th>Week Ending</th>
			<th class="money hide-mobile">Employees</th>
			<th class="money hide-mobile">Hours</th>
			<th class="money">Total</th>
			<th>Status</th>
			<th class="actions"></th>
		</tr>
	</thead>
	<tbody>
		{{range .Weeks}}
		<tr>
			<td class="hide-mobile">{{.WeekID}}</td>
			<td>{{.PeriodEndDisplay}}</td>
			<td class="money hide-mobile">{{.EmployeeCount}}</td>
			<td class="money hide-mobile">{{printf "%.1f" .TotalHours}}</td>
			<td class="money">${{printf "%.2f" .TotalPay}}</td>
			<td>
				{{if .AllPaid}}
					<span class="status status-paid">All Paid</span>
				{{else}}
					<span class="status status-unpaid">{{.PaidCount}}/{{.EmployeeCount}} Paid</span>
				{{end}}
			</td>
			<td class="actions">
				<a href="/payroll/weeks/{{.WeekID}}/edit" class="btn btn-secondary btn-small">Edit</a>
				<a href="/payroll/history/{{.WeekID}}" class="btn btn-secondary btn-small">View</a>
			</td>
		</tr>
		{{end}}
	</tbody>
</table>
{{else}}
<p class="empty-state">No payroll weeks yet. Create a new week to get started.</p>
{{end}}
{{template "footer" .}}
