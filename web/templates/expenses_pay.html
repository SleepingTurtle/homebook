{{template "header" .}}

<div class="max-w-lg mx-auto">
	<h1 class="text-2xl font-semibold text-gray-900 mb-6">Mark Receipt Paid</h1>

	<!-- Expense Summary Card -->
	<div class="bg-white border border-gray-200 rounded-lg p-5 mb-6">
		<h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-4">Receipt Details</h2>
		<dl class="space-y-3">
			<div class="flex justify-between">
				<dt class="text-sm text-gray-500">Vendor</dt>
				<dd class="text-sm font-medium text-gray-900">{{.Expense.VendorName}}</dd>
			</div>
			<div class="flex justify-between">
				<dt class="text-sm text-gray-500">Amount</dt>
				<dd class="text-lg font-bold text-gray-900">${{printf "%.2f" .Expense.Amount}}</dd>
			</div>
			<div class="flex justify-between">
				<dt class="text-sm text-gray-500">Date</dt>
				<dd class="text-sm font-medium text-gray-900">{{.Expense.Date}}</dd>
			</div>
			{{if .Expense.InvoiceNumber}}
			<div class="flex justify-between">
				<dt class="text-sm text-gray-500">Invoice #</dt>
				<dd class="text-sm font-medium text-gray-900">{{.Expense.InvoiceNumber}}</dd>
			</div>
			{{end}}
			{{if .Expense.DueDate}}
			<div class="flex justify-between">
				<dt class="text-sm text-gray-500">Due Date</dt>
				<dd class="text-sm font-medium text-gray-900">{{.Expense.DueDate}}</dd>
			</div>
			{{end}}
		</dl>
	</div>

	<!-- Payment Form -->
	<form action="/expenses/{{.Expense.ID}}/pay" method="POST" class="bg-white border border-gray-200 rounded-lg p-5">
		<h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-4">Payment Information</h2>

		<div class="space-y-4">
			<div>
				<label for="payment_type" class="block text-sm font-medium text-gray-700 mb-1">Payment Type</label>
				<select id="payment_type" name="payment_type" required
					class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
					<option value="">Select Payment Type</option>
					<option value="cash">Cash</option>
					<option value="check">Check</option>
					<option value="debit">Debit</option>
					<option value="credit">Credit</option>
				</select>
			</div>

			<div id="check-number-group" class="hidden">
				<label for="check_number" class="block text-sm font-medium text-gray-700 mb-1">
					Check Number
					{{if .LastCheckNumber}}<span class="font-normal text-gray-500">(Last used: {{.LastCheckNumber}})</span>{{end}}
				</label>
				<input type="text" id="check_number" name="check_number" placeholder="Enter check number"
					class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
			</div>
		</div>

		<div class="flex gap-3 mt-6 pt-4 border-t border-gray-200">
			<button type="submit" class="flex-1 px-4 py-2.5 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700">
				Mark as Paid
			</button>
			<a href="/expenses" class="flex-1 px-4 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-50 text-center">
				Cancel
			</a>
		</div>
	</form>
</div>

<script>
document.getElementById('payment_type').addEventListener('change', function() {
	var checkGroup = document.getElementById('check-number-group');
	checkGroup.classList.toggle('hidden', this.value !== 'check');
});
</script>

{{template "footer" .}}
