{{template "header" .}}
<div class="page-header">
	<h1>{{.Vendor.Name}}</h1>
	<a href="/vendors/{{.Vendor.ID}}/edit" class="btn btn-secondary">Edit Vendor</a>
</div>

<div class="vendor-details">
	{{if .Vendor.Description}}
	<p class="vendor-description">{{.Vendor.Description}}</p>
	{{end}}
	{{if .Vendor.Category}}
	<div class="vendor-categories">
		{{range .Vendor.CategoryList}}
		<span class="category-tag">{{.}}</span>
		{{end}}
	</div>
	{{end}}
</div>

<h2 style="margin-top: 2rem;">Expenses</h2>

{{if .Expenses}}
<table>
	<thead>
		<tr>
			<th>Date</th>
			<th class="money">Amount</th>
			<th class="hide-mobile">Invoice #</th>
			<th class="hide-mobile">Due Date</th>
			<th>Status</th>
			<th class="hide-mobile">Payment</th>
			<th class="actions"></th>
		</tr>
	</thead>
	<tbody>
		{{range .Expenses}}
		<tr>
			<td>{{.Date}}</td>
			<td class="money">${{printf "%.2f" .Amount}}</td>
			<td class="hide-mobile">{{.InvoiceNumber}}</td>
			<td class="hide-mobile">{{.DueDate}}</td>
			<td>
				{{if eq .Status "paid"}}
				<span class="status status-paid">Paid</span>
				{{else}}
				<span class="status status-unpaid">Unpaid</span>
				{{end}}
			</td>
			<td class="hide-mobile">{{.PaymentType}} {{if .CheckNumber}}#{{.CheckNumber}}{{end}}</td>
			<td class="actions">
				{{if eq .Status "not_paid"}}
				<a href="/expenses/{{.ID}}/pay" class="btn btn-success btn-small">Mark Paid</a>
				{{end}}
				<a href="/expenses/{{.ID}}/edit" class="btn btn-secondary btn-small">Edit</a>
			</td>
		</tr>
		{{end}}
		<tr class="totals-row">
			<td>Total</td>
			<td class="money">${{printf "%.2f" .Total}}</td>
			<td colspan="5"></td>
		</tr>
	</tbody>
</table>
{{else}}
<p class="empty-state">No expenses found for this vendor.</p>
{{end}}

<div style="margin-top: 2rem;">
	<a href="/expenses/new?vendor_id={{.Vendor.ID}}" class="btn btn-primary">Add Expense for {{.Vendor.Name}}</a>
	<a href="/vendors" class="btn btn-secondary">Back to Vendors</a>
</div>
{{template "footer" .}}
